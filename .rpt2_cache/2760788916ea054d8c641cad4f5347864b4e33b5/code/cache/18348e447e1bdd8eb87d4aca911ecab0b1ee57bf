{"code":"import { AreaStatsService } from '../area/areaStatsService';\r\nvar SupplyStateModificationService = /** @class */ (function () {\r\n    function SupplyStateModificationService() {\r\n    }\r\n    SupplyStateModificationService.updateSupply = function (state) {\r\n        var _this = this;\r\n        var updatedSupply = new Map();\r\n        state.players.forEach(function (player) {\r\n            updatedSupply.set(player.house, _this.calculateNumberOfSupply(Array.from(state.areas.values()), player.house));\r\n        });\r\n        return updatedSupply;\r\n    };\r\n    SupplyStateModificationService.calculateNumberOfSupply = function (areas, house) {\r\n        return areas.filter(function (area) {\r\n            var areaStats = AreaStatsService.getInstance().areaStats.get(area.key);\r\n            return area.controllingHouse === house && areaStats.supply > 0;\r\n        }).map(function (area) {\r\n            var areaStats = AreaStatsService.getInstance().areaStats.get(area.key);\r\n            return areaStats.supply;\r\n        }).reduce(function (accumulator, currentValue) {\r\n            return accumulator + currentValue;\r\n        }, 0);\r\n    };\r\n    return SupplyStateModificationService;\r\n}());\r\nexport default SupplyStateModificationService;\r\n//# sourceMappingURL=supplyStateModificationService.js.map","map":{"version":3,"file":"supplyStateModificationService.js","sourceRoot":"","sources":["supplyStateModificationService.ts"],"names":[],"mappings":"AAGA,OAAO,EAAC,gBAAgB,EAAC,MAAM,0BAA0B,CAAC;AAE1D;IAAA;IAyBA,CAAC;IAvBiB,2CAAY,GAA1B,UAA2B,KAAqB;QAAhD,iBAMC;QALG,IAAI,aAAa,GAAG,IAAI,GAAG,EAAiB,CAAC;QAC7C,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,UAAC,MAAM;YACzB,aAAa,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,EAAE,KAAI,CAAC,uBAAuB,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC;QAClH,CAAC,CAAC,CAAC;QACH,MAAM,CAAC,aAAa,CAAC;IACzB,CAAC;IAEc,sDAAuB,GAAtC,UAAuC,KAAa,EAAE,KAAY;QAC9D,MAAM,CAAC,KAAK,CAAC,MAAM,CAAC,UAAC,IAAU;YAC3B,IAAM,SAAS,GAAG,gBAAgB,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;YACzE,MAAM,CAAC,IAAI,CAAC,gBAAgB,KAAK,KAAK,IAAI,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC;QACnE,CAAC,CAAC,CAAC,GAAG,CAAC,UAAC,IAAI;YACR,IAAM,SAAS,GAAG,gBAAgB,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;YACzE,MAAM,CAAC,SAAS,CAAC,MAAM,CAAC;QAC5B,CAAC,CAAC,CAAC,MAAM,CACL,UAAC,WAAW,EACX,YAAY;YACT,MAAM,CAAC,WAAW,GAAG,YAAY,CAAC;QACtC,CAAC,EAAE,CAAC,CACP,CAAC;IACN,CAAC;IAEL,qCAAC;AAAD,CAAC,AAzBD,IAyBC"},"dts":{"name":"/Users/taamato1/pdev/got-store/src/logic/gameState/supplyStateModificationService.d.ts","text":"import { House } from '../../model/player/house';\r\nimport { GameStoreState } from '../../gameStoreState';\r\nexport default class SupplyStateModificationService {\r\n    static updateSupply(state: GameStoreState): Map<House, number>;\r\n    private static calculateNumberOfSupply(areas, house);\r\n}\r\n"}}
